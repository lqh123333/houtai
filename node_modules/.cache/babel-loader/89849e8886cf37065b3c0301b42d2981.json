{"ast":null,"code":"import \"core-js/modules/web.atob.js\";\nimport \"core-js/modules/web.dom-exception.constructor.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.dom-exception.to-string-tag.js\";\nimport VueRouter from \"vue-router\";\nimport Login from '../src/view/Login';\nimport Home from '../src/view/home';\nvar router = new VueRouter({\n  routes: [{\n    path: '/',\n    redirect: '/login'\n  }, {\n    path: '/login',\n    component: Login,\n    meta: {\n      title: '登录'\n    }\n  }, {\n    path: '/home',\n    component: Home,\n    meta: {\n      isAbout: true,\n      title: 'home'\n    }\n  }]\n}); //前置路由守卫\n\nrouter.beforeEach(function (to, from, next) {\n  if (to.meta.isAbout) {\n    //判断是否有token值\n    if (sessionStorage.getItem('token')) {\n      //判断token值shif和服务器传递的一直\n      var key = window.atob(sessionStorage.getItem('key'));\n      var token = sessionStorage.getItem('token');\n\n      if (key !== token) {\n        next('/login');\n        return;\n      }\n\n      next();\n    } else {\n      next('/login');\n    }\n  } else {\n    next();\n  }\n}); //后置路由守卫\n\nrouter.afterEach(function (to) {\n  document.title = to.meta.title || '后台管理系统';\n});\nexport default router;","map":{"version":3,"names":["VueRouter","Login","Home","router","routes","path","redirect","component","meta","title","isAbout","beforeEach","to","from","next","sessionStorage","getItem","key","window","atob","token","afterEach","document"],"sources":["C:/Users/Administrator/Desktop/项目/backstage/router/index.js"],"sourcesContent":["import VueRouter from \"vue-router\";\r\nimport Login from '../src/view/Login'\r\nimport Home from '../src/view/home'\r\nconst router = new VueRouter({\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            redirect: '/login'\r\n        },\r\n        {\r\n            path: '/login',\r\n            component: Login,\r\n            meta: { title: '登录' }\r\n        },\r\n        {\r\n            path: '/home',\r\n            component: Home,\r\n            meta: { isAbout: true, title: 'home' }\r\n        }\r\n    ]\r\n})\r\n//前置路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n    if (to.meta.isAbout) {\r\n        //判断是否有token值\r\n        if (sessionStorage.getItem('token')) {\r\n            //判断token值shif和服务器传递的一直\r\n            const key = window.atob(sessionStorage.getItem('key'))\r\n            const token = sessionStorage.getItem('token')\r\n            if (key !== token) {\r\n                next('/login')\r\n                return\r\n            }\r\n                next()\r\n            \r\n           \r\n        } else {\r\n            next('/login')\r\n        }\r\n\r\n    } else {\r\n        next()\r\n    }\r\n\r\n})\r\n//后置路由守卫\r\n\r\nrouter.afterEach((to) => {\r\n    document.title = to.meta.title || '后台管理系统'\r\n\r\n})\r\n\r\nexport default router"],"mappings":";;;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,IAAMC,MAAM,GAAG,IAAIH,SAAJ,CAAc;EACzBI,MAAM,EAAE,CACJ;IACIC,IAAI,EAAE,GADV;IAEIC,QAAQ,EAAE;EAFd,CADI,EAKJ;IACID,IAAI,EAAE,QADV;IAEIE,SAAS,EAAEN,KAFf;IAGIO,IAAI,EAAE;MAAEC,KAAK,EAAE;IAAT;EAHV,CALI,EAUJ;IACIJ,IAAI,EAAE,OADV;IAEIE,SAAS,EAAEL,IAFf;IAGIM,IAAI,EAAE;MAAEE,OAAO,EAAE,IAAX;MAAiBD,KAAK,EAAE;IAAxB;EAHV,CAVI;AADiB,CAAd,CAAf,C,CAkBA;;AACAN,MAAM,CAACQ,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;EAClC,IAAIF,EAAE,CAACJ,IAAH,CAAQE,OAAZ,EAAqB;IACjB;IACA,IAAIK,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAJ,EAAqC;MACjC;MACA,IAAMC,GAAG,GAAGC,MAAM,CAACC,IAAP,CAAYJ,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAAZ,CAAZ;MACA,IAAMI,KAAK,GAAGL,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd;;MACA,IAAIC,GAAG,KAAKG,KAAZ,EAAmB;QACfN,IAAI,CAAC,QAAD,CAAJ;QACA;MACH;;MACGA,IAAI;IAGX,CAXD,MAWO;MACHA,IAAI,CAAC,QAAD,CAAJ;IACH;EAEJ,CAjBD,MAiBO;IACHA,IAAI;EACP;AAEJ,CAtBD,E,CAuBA;;AAEAX,MAAM,CAACkB,SAAP,CAAiB,UAACT,EAAD,EAAQ;EACrBU,QAAQ,CAACb,KAAT,GAAiBG,EAAE,CAACJ,IAAH,CAAQC,KAAR,IAAiB,QAAlC;AAEH,CAHD;AAKA,eAAeN,MAAf"},"metadata":{},"sourceType":"module"}